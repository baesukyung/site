<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>20200717 openweathermap</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>

    <script>
        var url = 'http://api.openweathermap.org/data/2.5/weather?q=kwangju&appid=203db92cb00703b7f13cd37d38be66ed'

        $.getJSON(url,function(data){
            var sys = data.sys;             // 국가명, 일출 일몰
            var city = data.name;           // 도시명
            var weather = data.weather;     // 날씨 객체
            var main = data.main;           // 온도 기압 관련 객체
            var wmain = weather[0].main;    // 구름 상태
            var w_id = weather[0].id;       // 날씨상태 id 코드
            var icon = weather[0].icon;     // 날씨 아이콘 정보
            var country = sys.country;      // 국가명
            var temp = main.temp;           // 현재 온도
            var temp_min = main.temp_min;   // 최저 온도
            var temp_max = main.temp_max;   // 최고 온도
            // 온도는 국제단위인 켈빈값이여서 -273.15를 빼줘서 섭씨로 바꿈

            $('body').append(wmain + ', ' + icon + ' '
                + '현재 온도: ' + parseInt(temp-273.15) + ' '
                + '최저 온도: ' + parseInt(temp_min-273.15) + ' '
                + '최고 온도: ' + parseInt(temp_max-273.15) + ' '
                + country + ' ' +  city + ' ' + w_id + ' ' + '<br>');

                //날씨 아이콘 표시
                var icon_url = 'http://openweathermap.org/img/w/'+icon;
                $('body').append("<img src='" + icon_url + ".png'>");
        });
        //안될때는 꼭 cash 삭제하세욧~!!!!!!!!!

    </script>
    
</body>
</html>