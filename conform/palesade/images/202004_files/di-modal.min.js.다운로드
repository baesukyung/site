var DI_Modal=function(){var i=null,r=null,a=null,c=[],l=!1,t={class:""},s='<div class="di-modal-placeholder"></div>',e='<div id="di-modal"><div class="modal-wrap"><div class="di-modal-box"><div class="di-modal-box-inner"></div><div class="di-modal-close"></div></div></div></div>',u="<iframe src={src}></iframe>",n=function(){document.body.insertAdjacentHTML("beforeEnd",e)},o=function(){i=document.querySelector("#di-modal"),document.querySelector("#di-modal .di-modal-close")},d=function(){document.body.addEventListener("click",f),document.body.addEventListener("click",m)},m=function(e){var t=function(e,t){var n,o;if(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]&&(n=e,!0)}),e&&e[n](t))return e;for(;e;){if((o=e.parentElement)&&o[n](t))return o;e=o}return null}(e.target,".di-modal");t&&(e.preventDefault(),q("beforeOpen.di.modal",{event:t}),p(),v(t))},f=function(e){E(i,"faded-in")&&e.target&&E(e.target,"di-modal-close")&&p(e)},v=function(e){if(!function(e){if("#"==(a="string"==typeof e?e:e.getAttribute("href")).charAt(0)?(r="content",a=a.replace(/\./g,"\\.")):r="iframe",a&&("content"!=r||document.querySelector(a))&&"content"==r){var t=document.querySelector(a).getAttribute("data-modal-classes");if(t&&-1<(c=t.split(" ")).indexOf("modal--action-bar")&&(l=!0),document.querySelector(a).getAttribute("data-mobileSize")){var n=document.querySelector(a).getAttribute("data-mobileSize");c.push("modal-size--mobile-"+n)}}}(e),g(),"content"==r){var t=document.querySelector(a);if(void 0!==t&&null!=t){if(E(i,"faded-in")){var n=document.querySelector(".di-modal-placeholder"),o=document.querySelector("#di-modal .di-modal-box-inner").children[0];n.insertAdjacentElement("afterend",o),L(o),n.parentNode.removeChild(n)}t.insertAdjacentHTML("afterend",s),document.querySelector("#di-modal .di-modal-box-inner").appendChild(t),function(e){e.style.display="block"}(t),y(),h(t)}else console.log("Cannot find content for modal.")}else if("iframe"==r)if(void 0!==a&&""!==a){var d=function(n,o){return bracket_str=n.match(/\{([^}]+)\}/g),bracket_str.forEach(function(e){for(var t in o)e.replace(/[{}]/g,"")==t&&(n=n.replace(e,o[t]))}),n}(u,{src:a});y(),document.querySelector("#di-modal .di-modal-box-inner").insertAdjacentHTML("beforeEnd",d),A(i,"iframe-open")}else console.log("Cannot find url for modal")},p=function(){if(E(i,"faded-in")){var e=document.querySelector("#di-modal .di-modal-box-inner").children[0];if(b(),S(),"content"==r){var t=document.querySelector(".di-modal-placeholder");t?(t.insertAdjacentElement("afterend",e),L(e),t.parentNode.removeChild(t)):e.remove()}else C(i,"iframe-open"),document.querySelector("#di-modal iframe").parentNode.removeChild(document.querySelector("#di-modal iframe"))}},y=function(){q("onOpen.di.modal"),A(i,"faded-in"),A(document.body,"di-modal-open"),1==l&&A(document.body,"di-modal-enable-scroll"),q("onOpen.di.modal.loaded"),q("di_check_visible_forms")},b=function(){C(i,"faded-in"),C(document.body,"di-modal-open"),q("onClose.di.modal")},h=function(e){for(var t=document.querySelectorAll("#"+e.id+" .swiper-wrapper"),n=0;n<t.length;n++)void 0!==t[n].parentNode.swiper&&t[n].parentNode.swiper.update()},g=function(){if(0<c.length)for(var e=0;e<c.length;e++)A(i,c[e])},S=function(){if(0<c.length){for(var e=0;e<c.length;e++)C(i,c[e]);c=[]}},q=function(t,n){try{var o=new CustomEvent(t,{detail:n})}catch(e){(o=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n)}document.dispatchEvent(o)};function E(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function A(e,t){e.classList?e.classList.add(t):E(e,t)||(e.className+=" "+t)}function C(e,t){if(e.classList)e.classList.remove(t);else if(E(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}function L(e){e.style.display="none"}var w=function(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e};return{options:t,setOptions:function(e){!function(e){w(t,e),t.class&&A(i,t.class)}(e)},triggerOpen:v,triggerClose:p,init:function(){n(),o(),d()}}}();DI_Modal.init();